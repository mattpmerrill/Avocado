@model Avocado.Web.Models.SignInViewModel
           
@{
    ViewBag.Title = "LogIn";
}

@*<div id="fb-root"></div>
<script type="text/javascript">
    window.fbAsyncInit = function () {
        FB.init({ appId: '183406445033444', status: true, cookie: true, xfbml: true });

        /* All the events registered */
        FB.Event.subscribe('auth.login', function (response) {
            // do something with response
            login();
        });
        FB.Event.subscribe('auth.logout', function (response) {
            // do something with response
            logout();
        });

        FB.getLoginStatus(function (response) {
            if (response.session) {
                // logged in and connected user, someone you know
                //login();
                alert('You are logged into Facebook right now');
            }
        });
    };
    (function() {
        var e = document.createElement('script');
        e.type = 'text/javascript';
        e.src = document.location.protocol +
            '//connect.facebook.net/en_US/all.js';
        e.async = true;
        document.getElementById('fb-root').appendChild(e);
    } ());

    function login() {
        FB.api('/me', function (response) {
            window.location = '/Account/LogInWithFacebook/?facebookEmail=' + response.email;
        });
    }

    $(function () {
        $('#customFBLogin').click(function () {
            CustomButtonLogin();
        });
    });

    function CustomButtonLogin() {
        FB.login(function (response) {
            if (response.session) {
                if (response.perms) {
                    // user is logged in and granted some permissions.
                    // perms is a comma separated list of granted permissions
                } else {
                    // user is logged in, but did not grant any permissions
                }
            } else {
                // user is not logged in
            }
        }, { perms: 'publish_stream,email' });
    }
</script>*@

<div class="container">
    <div class="row">
        <div class="span8">
            <h1>Sign In</h1>

            @using (Html.BeginForm("LogIn", "Account", FormMethod.Post, new { autocomplete="off" }))
            {
                @Html.ValidationSummary(excludePropertyErrors: false, message: "", htmlAttributes: new { @class = "ui-state-error" })

                @Html.TextBoxFor(x => x.Email, new { @class = "form-input", placeholder="your email address" })<br /><br />
        
                @Html.PasswordFor(x => x.Password, new { @class = "form-input", placeholder="password" })<br /><br />
    
                <div>
                    <input type="submit" class="btn primary large" value="Log In" />
                </div>
            }        
        </div>

        <div class="span8">
            <h1>Already Social?</h1>
            <h4>Sign in with your account below.</h4>
            <p>
                <fb:login-button 
                    autologoutlink="true"
                    size="large" 
                    perms="email,publish_stream">
                    Login with Facebook
                </fb:login-button>
            </p>
            <p>
                <img src="@Url.Content("~/content/images/sign-in-with-twitter-d.png")" alt="sign in with Twitter" id="customTwitterLogin" />
            </p>
        </div>
    </div>
</div>
    

    
