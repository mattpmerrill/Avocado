@model Avocado.Web.Models.SignInViewModel

@if (Request.IsAuthenticated)
{ 
    <span>Welcome @Context.User.Identity.Name</span> <span><a href="/Account/Logout">Logout</a></span>   
}
else
{
    <input id="register-button" type="button" value="New to CreativiMe? Join Today!" />
    <input id="login-button" type="button" value="Log In" />
    <input id="modal-button" type="button" value="test the modal" />
    
    <div id="myModal" class="reveal-modal xlarge">
        <div style="float:left;">
            <h2>CreativiMe<span>Login now and start sharing YOUR creativity!</span></h2>
            <p>
                @using (Html.BeginForm("Login", "Account", FormMethod.Post, new { autocomplete="off" }))
                {
                    @Html.ValidationSummary(excludePropertyErrors: false, message: "", htmlAttributes: new { @class = "ui-state-error", style = "width:325px; margin-bottom:20px;" })

                    @Html.LabelFor(x => x.Email)<br /> 
                    @Html.TextBoxFor(x => x.Email, new { @class = "form-input" })<br /><br />
        
                    @Html.LabelFor(x => x.Password)<br />
                    @Html.PasswordFor(x => x.Password, new { @class = "form-input" })<br /><br />
    
                    <div>
                        <input type="submit" value="Log In" />
                    </div>
                }
            </p>
            
        </div>
        

        <div style="float:right;">
            <h2>Got Facebook?<span>You can also log in with your Facebook account.</span></h2>
            <p>
                <fb:login-button 
                    autologoutlink="true"
                    size="large" 
                    perms="email,publish_stream">
                    Login with Facebook
                </fb:login-button>
            </p>
            <p>
                <input id="customFBLogin" type="button" value="My Custom FB Login" />
            </p>
        </div>

        <p><a class="close-reveal-modal">&#215;</a></p>
    </div>    
        
    <script type="text/javascript">
        $(function () {
            $('#customFBLogin').click(function () {
                CustomButtonLogin();
            });

            $('#customTwitterLogin').click(function () {
                window.location = '/Account/SignInWithTwitter';
            });

            $('input:button, input:submit').button();

            $('#register-button').click(function () {
                window.location = '/Account/CreateAccount';
            });

            $('#login-button').click(function () {
                window.location = '/Account/LogIn';
            });

            $('#modal-button').click(function (e) {
                e.preventDefault();
                $('#myModal').reveal({
                    animation: 'fadeAndPop',                   //fade, fadeAndPop, none
                    animationspeed: 400,                       //how fast animtions are
                    closeonbackgroundclick: true
                }); //.effect("bounce", { times: 2, distance: 10 }, 400);
            });
        });
    </script>
}