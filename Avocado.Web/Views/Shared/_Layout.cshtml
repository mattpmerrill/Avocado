<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="@Url.Content("~/Content/css/bootstrap.min.css")" rel="Stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/css/Estilo.css")" rel="Stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/css/reveal.css")" rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.reveal.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/bootstrap-dropdown.js")" type="text/javascript"></script>
    <script src="../../Scripts/bootstrap-alerts.js" type="text/javascript"></script>
    @RenderSection("Head", required: false)
</head>

<body>
    <div id="fb-root"></div>

    <div class="topbar" data-dropdown="dropdown">
        <div class="fill">
            <div class="container">
                <a class="brand" href="#" id="sitename">Creativime</a>
                <ul class="nav">
                    <li class="dropdown">
                        <a class="dropdown-toggle" href="/Browse">Explore</a>
                        <ul class="dropdown-menu">
                            <li><a href="/Browse/Category/Crafts">Crafts</a></li>
                            <li><a href="/Browse/Category/Food">Food</a></li>
                            <li><a href="/Browse/Category/Events">Events</a></li>
                            <li><a href="/Browse/Category/Re-Purpose Projects">Re-Purpose Projects</a></li>
                        </ul>
                    </li>
                    <li><a href="/People">People</a></li>
                </ul>

                <div class="pull-right">
                    @Html.Partial("_LoginIndicator", new Avocado.Web.Models.SignInViewModel())
                </div>
            </div>
        </div>
    </div>

    <!--each page will define it's own grid system within it's main container-->
    @RenderBody()

    <div class="container">
        <footer>
            <p>&copy; Creativime 2011</p>
        </footer>
    </div>
</body>

<!--all scripts at the bottom of the page-->
<script type="text/javascript">
    $(function () {
        $('#sitename').click(function () {
            window.location = '/';
        });
    });

    window.fbAsyncInit = function () {
        FB.init({ appId: '183406445033444', status: true, cookie: true, xfbml: true });

        /* All the events registered */
        FB.Event.subscribe('auth.login', function (response) {
            // do something with response
            login();
        });
        FB.Event.subscribe('auth.logout', function (response) {
            // do something with response
            logout();
        });

        FB.getLoginStatus(function (response) {
            if (response.session) {
                // logged in and connected user, someone you know
                //login();
                //alert('You are logged into Facebook right now');
            }
        });
    };

    $(function () {
        var e = document.createElement('script');
        e.type = 'text/javascript';
        e.src = document.location.protocol +
        '//connect.facebook.net/en_US/all.js';
        e.async = true;
        document.getElementById('fb-root').appendChild(e);
    } ());

    function login() {
        FB.api('/me', function (response) {
            window.location = '/Account/LogInWithSocial/?socialId=' + response.email;
        });
    }

    function CustomButtonLogin() {
        FB.login(function (response) {
            if (response.session) {
                if (response.perms) {
                    // user is logged in and granted some permissions.
                    // perms is a comma separated list of granted permissions
                } else {
                    // user is logged in, but did not grant any permissions
                }
            } else {
                // user is not logged in
            }
        }, { perms: 'publish_stream,email' });
    }
</script>
@RenderSection("Scripts", required: false)
</html>
