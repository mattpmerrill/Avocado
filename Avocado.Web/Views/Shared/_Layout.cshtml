<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/css/Estilo.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/css/Layout.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/css/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/themes/SouthStreet/jquery-ui-1.8.10.custom.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/css/reveal.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.10.custom.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.reveal.js")" type="text/javascript"></script>

    <script type="text/javascript">
        $(function () {
            $('#sitename').click(function () {
                window.location = '/';
            });
        });
    </script>
    @RenderSection("Head", required:false)
</head>

<body class="ui-widget-header">
    <div id="fb-root"></div>
    <div id="header">
        <div id="headerContainer">
            <div class="leftContent"><span id="sitename">CreativiMe.com</span></div>
            <div class="rightContent">
                @Html.Partial("_LoginIndicator", new Avocado.Web.Models.SignInViewModel())
            </div>
        </div>
    </div>
    <div id="content">
        <div id="contentContainer">
            @RenderBody()        
        </div>
    </div>
    <div id="footer">
        <div id="footerContainer">
            all Footer content will go here
        </div>
    </div>
    <script type="text/javascript">
        window.fbAsyncInit = function () {
            FB.init({ appId: '183406445033444', status: true, cookie: true, xfbml: true });

            /* All the events registered */
            FB.Event.subscribe('auth.login', function (response) {
                // do something with response
                login();
            });
            FB.Event.subscribe('auth.logout', function (response) {
                // do something with response
                logout();
            });

            FB.getLoginStatus(function (response) {
                if (response.session) {
                    // logged in and connected user, someone you know
                    //login();
                    //alert('You are logged into Facebook right now');
                }
            });
        };

        $(function () {
            var e = document.createElement('script');
            e.type = 'text/javascript';
            e.src = document.location.protocol +
            '//connect.facebook.net/en_US/all.js';
            e.async = true;
            document.getElementById('fb-root').appendChild(e);
        } ());

        function login() {
            FB.api('/me', function (response) {
                window.location = '/Account/LogInWithSocial/?socialId=' + response.email;
            });
        }

        function CustomButtonLogin() {
            FB.login(function (response) {
                if (response.session) {
                    if (response.perms) {
                        // user is logged in and granted some permissions.
                        // perms is a comma separated list of granted permissions
                    } else {
                        // user is logged in, but did not grant any permissions
                    }
                } else {
                    // user is not logged in
                }
            }, { perms: 'publish_stream,email' });
        }
    </script>
</body>
</html>
